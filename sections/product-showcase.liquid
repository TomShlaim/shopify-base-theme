{% liquid
  assign collection = collections[section.settings.collection]
%}

<div class="product-showcase">
  <div class="page-width">
    <div class="product-showcase__header">
      <h2 class="product-showcase__title">{{ section.settings.title }}</h2>
      <div class="product-showcase__description">{{ section.settings.description }}</div>
    </div>

    <div class="product-showcase__grid">
      {%- for product in collection.products limit: section.settings.products_to_show -%}
        <div class="product-card">
          <a href="{{ product.url }}" class="product-card__link">
            <div class="product-card__image-wrapper">
              {%- if product.featured_image -%}
                {{ product.featured_image | image_url: width: 600 | image_tag:
                  loading: 'lazy',
                  class: 'product-card__image',
                  widths: '200, 400, 600',
                  sizes: '(min-width: 990px) 33vw, (min-width: 750px) 50vw, 100vw',
                  alt: product.featured_image.alt | escape
                }}
                {%- if product.images[1] -%}
                  {{ product.images[1] | image_url: width: 600 | image_tag:
                    loading: 'lazy',
                    class: 'product-card__hover-image',
                    widths: '200, 400, 600',
                    sizes: '(min-width: 990px) 33vw, (min-width: 750px) 50vw, 100vw',
                    alt: product.images[1].alt | escape
                  }}
                {%- endif -%}
              {%- endif -%}
            </div>

            <div class="product-card__content">
              <h3 class="product-card__title">{{ product.title }}</h3>
              <div class="product-card__description">{{ product.description | strip_html | truncatewords: 20 }}</div>
              
              {%- if product.metafields.custom.benefits != blank -%}
                <ul class="product-card__benefits">
                  {%- for benefit in product.metafields.custom.benefits.value -%}
                    <li class="product-card__benefit">{{ benefit }}</li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}

              <div class="product-card__price">
                {%- if product.compare_at_price > product.price -%}
                  <span class="product-card__price--sale">{{ product.price | money }}</span>
                  <span class="product-card__price--compare">{{ product.compare_at_price | money }}</span>
                {%- else -%}
                  <span class="product-card__price--regular">{{ product.price | money }}</span>
                {%- endif -%}
              </div>

              <span class="product-card__button button button--secondary">
                Shop Now
              </span>
            </div>
          </a>
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

{% style %}
.product-showcase {
  padding: 80px 0;
  background: {{ section.settings.background_color }};
}

.product-showcase__header {
  text-align: center;
  margin-bottom: 60px;
}

.product-showcase__title {
  font-size: 32px;
  margin: 0 0 20px;
  color: {{ section.settings.title_color }};
}

.product-showcase__description {
  font-size: 18px;
  max-width: 800px;
  margin: 0 auto;
  color: {{ section.settings.text_color }};
}

.product-showcase__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
}

.product-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}

.product-card__link {
  text-decoration: none;
  color: inherit;
  display: block;
}

.product-card__image-wrapper {
  position: relative;
  padding-bottom: 100%;
  overflow: hidden;
}

.product-card__image,
.product-card__hover-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity 0.3s ease;
}

.product-card__hover-image {
  opacity: 0;
}

.product-card:hover .product-card__hover-image {
  opacity: 1;
}

.product-card__content {
  padding: 20px;
}

.product-card__title {
  font-size: 20px;
  margin: 0 0 10px;
  color: {{ section.settings.title_color }};
}

.product-card__description {
  font-size: 14px;
  margin-bottom: 15px;
  color: {{ section.settings.text_color }};
}

.product-card__benefits {
  list-style: none;
  padding: 0;
  margin: 0 0 15px;
}

.product-card__benefit {
  font-size: 14px;
  margin-bottom: 5px;
  padding-left: 20px;
  position: relative;
  color: {{ section.settings.text_color }};
}

.product-card__benefit::before {
  content: 'âœ“';
  position: absolute;
  left: 0;
  color: {{ section.settings.accent_color }};
}

.product-card__price {
  margin-bottom: 15px;
  font-size: 18px;
}

.product-card__price--sale {
  color: {{ section.settings.sale_color }};
  margin-right: 10px;
}

.product-card__price--compare {
  text-decoration: line-through;
  color: {{ section.settings.text_color }};
  opacity: 0.7;
}

.product-card__price--regular {
  color: {{ section.settings.text_color }};
}

.product-card__button {
  width: 100%;
  text-align: center;
}

@media screen and (max-width: 989px) {
  .product-showcase {
    padding: 60px 0;
  }

  .product-showcase__title {
    font-size: 28px;
  }

  .product-showcase__description {
    font-size: 16px;
  }
}

@media screen and (max-width: 749px) {
  .product-showcase {
    padding: 40px 0;
  }

  .product-showcase__grid {
    grid-template-columns: 1fr;
  }
}
{% endstyle %}

{% schema %}
{
  "name": "Product Showcase",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Shop Pet Vitamins"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Discover our range of premium pet vitamins, designed to support your pet's health and wellness.</p>"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 3,
      "max": 12,
      "step": 3,
      "default": 3,
      "label": "Products to show"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent color",
      "default": "#4CAF50"
    },
    {
      "type": "color",
      "id": "sale_color",
      "label": "Sale price color",
      "default": "#E53935"
    }
  ],
  "presets": [
    {
      "name": "Product Showcase",
      "category": "Product"
    }
  ]
}
{% endschema %} 