{{ 'custom-video-slider-ta.css' | asset_url | stylesheet_tag }}

<div class="custom-video-slider padding-top-75 padding-bottom-75">
  <div class="text-area scroll-trigger animate--slide-in">
    <div class="in_text-area">
<svg xmlns="http://www.w3.org/2000/svg" id="uuid-6671e666-11c2-4df6-a8a3-319966f06af9" data-name="Layer_2" viewBox="0 0 88.77 16" class="icon_stars">
  <g id="uuid-732e118e-e492-4b8a-944c-8da402457882" data-name="Layer_1">
    <path id="uuid-fb3aedff-655d-4a24-a1b7-e0021ba7f0b9" data-name="star" d="M8.83.27l2.44,4.54,5.07.92c.4.07.56.56.28.86l-3.56,3.73.69,5.11c.06.4-.36.7-.73.53l-4.64-2.23-4.64,2.23c-.37.18-.78-.13-.73-.53l.69-5.11L.14,6.58c-.28-.29-.12-.78.28-.86l5.07-.92L7.94.27c.19-.36.71-.36.9,0h0Z" style="fill: #ebee02;"/>
    <path id="uuid-6ca31efe-921b-4759-92a6-a708884d47a2" data-name="star" d="M26.83.27l2.44,4.54,5.07.92c.4.07.56.56.28.86l-3.56,3.73.69,5.11c.06.4-.36.7-.73.53l-4.64-2.23-4.64,2.23c-.37.18-.78-.13-.73-.53l.69-5.11-3.56-3.73c-.28-.29-.12-.78.28-.86l5.07-.92L25.94.27c.19-.36.71-.36.9,0h0Z" style="fill: #ebee02;"/>
    <path id="uuid-466b22be-295e-478f-9381-bf24acb3c691" data-name="star" d="M44.83.27l2.44,4.54,5.07.92c.4.07.56.56.28.86l-3.56,3.73.69,5.11c.06.4-.36.7-.73.53l-4.64-2.23-4.64,2.23c-.37.18-.78-.13-.73-.53l.69-5.11-3.56-3.73c-.28-.29-.12-.78.28-.86l5.07-.92,2.44-4.54c.19-.36.71-.36.9,0h0Z" style="fill: #ebee02;"/>
    <path id="uuid-a04283f8-88b8-4a54-bf93-8be04170111a" data-name="star" d="M62.83.27l2.44,4.54,5.07.92c.4.07.56.56.28.86l-3.56,3.73.69,5.11c.06.4-.36.7-.73.53l-4.64-2.23-4.64,2.23c-.37.18-.78-.13-.73-.53l.69-5.11-3.56-3.73c-.28-.29-.12-.78.28-.86l5.07-.92,2.44-4.54c.19-.36.71-.36.9,0h0Z" style="fill: #ebee02;"/>
    <path id="uuid-b3ba331a-d015-45f5-8880-0d39f66d7736" data-name="star" d="M80.83.27l2.44,4.54,5.07.92c.4.07.56.56.28.86l-3.56,3.73.69,5.11c.06.4-.36.7-.73.53l-4.64-2.23-4.64,2.23c-.37.18-.78-.13-.73-.53l.69-5.11-3.56-3.73c-.28-.29-.12-.78.28-.86l5.07-.92,2.44-4.54c.19-.36.71-.36.9,0h0Z" style="fill: #ebee02;"/>
  </g>
</svg>
      <h2 class="title-section pb-25 ">{{ section.settings.heading }} </h2>
      <div class="text-description padding-bottom-30">{{ section.settings.description }}</div>
        <a href="https://www.instagram.com/gumpawspets/?igsh=ajl6eHM0b3BvaW01&utm_source=qr#" class="outline_btn" target="_blank">Let's stay connected </a>
    </div>
  </div>
  <div class="carousel-area scroll-trigger animate--slide-in">
    <div class="swiper-container-info swiper-container">
      <div class="swiper-wrapper cards_block">
        {% for block in section.blocks %}
       <div class="swiper-slide" 
     data-video="{{ block.settings.video_url }}" 
     data-title="{{ block.settings.title }}">
<div class="play_btn">
  <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" clip-rule="evenodd" width="57" height="62" viewBox="0 0 57 62" class="mt-icon mt-icon--play">
  <path fill="#fff" fill-rule="nonzero" d="m.18 5.08-.01-.01C0 5.57 0 6.25 0 6.93v48.15c0 .67 0 1.18.17 1.86A7.09 7.09 0 0 0 6.93 62c1.35 0 2.53-.34 3.54-1.01l29.57-16.9L52.71 37a7.05 7.05 0 0 0 3.72-6.08 7.58 7.58 0 0 0-3.88-6.08l-12.68-7.27L10.64 1.01A6.81 6.81 0 0 0 6.93 0C3.72 0 .85 2.2.17 5.07Z"/>
</svg>
  </div>
  <img src="{{ block.settings.carousel_image | img_url: 'large' }}" alt="{{ block.settings.title }}" loading="lazy">
<div class="slider_content">
 
          <div class="slide-subtitle ">{{ block.settings.subtitle }}</div>
   <div class="slidetitle">{{ block.settings.title }}</div>
</div>
</div>

        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  new Swiper('.swiper-container-info', {
    slidesPerView: 'auto',
    spaceBetween: 13 / 20,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
  });

  document.querySelectorAll('.swiper-slide').forEach(function (slide) {
    function playVideo() {
      let video = slide.querySelector('.slide-video');
      if (!video) {
        video = document.createElement('video');
        video.classList.add('slide-video');
        video.muted = true;
        video.loop = true;
        video.playsInline = true;
        video.setAttribute('playsinline', 'true');
        video.style.position = 'absolute';
        video.style.top = '0';
        video.style.left = '0';
        video.style.width = '100%';
        video.style.height = '100%';
        video.style.objectFit = 'cover';
        video.style.opacity = '0';
        video.style.transition = 'opacity 0.5s ease-in-out';
        video.style.pointerEvents = 'none';

        const source = document.createElement('source');
        source.src = slide.getAttribute('data-video');
        source.type = 'video/mp4';
        video.appendChild(source);

        slide.appendChild(video);
      }
      video.style.opacity = '1';
      video.play();
    }

    function stopVideo() {
      const video = slide.querySelector('.slide-video');
      if (video) {
        video.pause();
        video.currentTime = 0;
        video.style.opacity = '0';
      }
    }

    slide.addEventListener('mouseenter', playVideo);
    slide.addEventListener('mouseleave', stopVideo);
    slide.addEventListener('click', function () {
      const video = slide.querySelector('.slide-video');
      if (video && !video.paused) {
        stopVideo();
      } else {
        playVideo();
      }
    });
  });
});



</script>


{% schema %}
{
  "name": "Custom Video Slider",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Default Heading"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Default description text goes here."
    }
  ],
  "blocks": [
    {
      "type": "video_with_text",
      "name": "Video with Text",
      "settings": [
        {
          "type": "image_picker",
          "id": "carousel_image",
          "label": "Carousel Image"
        },

        {
          "type": "url",
          "id": "video_url",
          "label": "Video URL"
        },
{
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Default Title"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "Default Title"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Video Slider",
      "blocks": [
        {
          "type": "video_with_text"
        },
        {
          "type": "video_with_text"
        }
      ]
    }
  ]
}
{% endschema %}

